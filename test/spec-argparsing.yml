
# Data format:
# {@SEE} ../usage.bash

# oifs=$IFS
# IFS=''
# printf "Positionals: %s | " "${_positionals[@]}"
# printf "PositionalInventoryHostgroup: %s | " "$_arg_positional_inventory"
# printf "PositionalPlaybook: %s | " "$_arg_positional_playbook"
# printf "Inventory file path: %s | " "${_arg_inventory_file[@]}"
# printf "Playbook file path: %s | " "${_arg_playbook_file[@]}"
# printf "Additional options: %s\n" "${remainder_args[*]}"
# echo "Used -i or --inventory arg?:" "$_debug_var_used_iflag"
# echo "Used -p or --play arg?: "$_debug_var_used_pflag
# IFS=$oifs

# Python converts undefineds to "None" so for ease just defined it here as "" for now

hostgroup: bianca-blog.dev.app
assert_type: assert_line
partial: true
script_name: usage.bash

tests:
  - description: hostgroup and playbook positionals given
    shell: 'bianca-blog.dev site.yml -- -l docker --list-hosts'
    expected: 
      - "PositionalInventoryHostgroup: bianca-blog.dev"
      - "PositionalPlaybook: site.yml"
      - "Additional options: -l docker --list-hosts"

  - description: -i flag -p flag given with add'l options
    shell: '-i hosts -p site.yml -- -l docker --list-hosts'
    expected: 
      - "Inventory file path: hosts"
      - "Playbook file path: site.yml"
      - "Additional options: -l docker --list-hosts"

  - description: Long + short opts mix
    shell: --inventory hosts -p site.yml -- -l docker --list-hosts 
    expected: 
      - "Inventory file path: hosts"
      - "Playbook file path: site.yml"
      - "Additional options: -l docker --list-hosts"
  
  - description: Long + long opts
    shell: --inventory hosts --play site.yml -- -l docker --list-hosts 
    expected: 
      - "Inventory file path: hosts"
      - "Playbook file path: site.yml"
      - "Additional options: -l docker --list-hosts"

  - description: Equals signs
    shell: --inventory=hosts --play=site.yml -- -l docker --list-hosts 
    expected: 
      - "Inventory file path: hosts"
      - "Playbook file path: site.yml"
      - "Additional options: -l docker --list-hosts"

  - description: Unknown Option
    shell: --inventory=hosts --play=site.yml --wat -- -l docker --list-hosts 
    expected: 
      - "Unknown option: '--wat'"
  
  - description: Unknown option after separator
    shell: --inventory=hosts --play=site.yml -- -l docker --list-hosts --unknown
    expected: 
      - "Inventory file path: hosts"
  
  - description: Handle dangling separator
    shell: --inventory=hosts --play=site.yml -- 
    expected: 
      - "Inventory file path: hosts"
  
  - description: Stacked options
    shell: --inventory=hosts --play=site.yml -cx
    expected: 
      - "Inventory file path: hosts"